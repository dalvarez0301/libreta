---

---

<script>
import { Contacto } from "../models/contacto";
import type { IContacto } from "../types/IContactos";

const contactoModel = new Contacto();

//recuperar el id por parametro de la url
const urlParams = new URLSearchParams(window.location.search);
const id = urlParams.get("contactId");
console.log(id);

// buscar el contacto por id
const contact = await contactoModel.obtenerContacto(id ?? '');
console.log(contact);

//llenar los campos del formulario
const numberIdInput = document.getElementById('number-id') as HTMLInputElement;
const contactData = await contact;
numberIdInput.value = contactData?.cedula?? '';

const nombreInput = document.getElementById('nombre') as HTMLInputElement;
nombreInput.value = contactData?.nombre ?? '';

const apellidoInput = document.getElementById('apellido') as HTMLInputElement;
apellidoInput.value = contactData?.apellido ?? '';

const correoInput = document.getElementById('correo') as HTMLInputElement;
correoInput.value = contactData?.correo ?? '';

const profesionInput = document.getElementById('profesion') as HTMLInputElement;
profesionInput.value = contactData?.profesion ?? '';

//actualizar el contacto
const form = document.querySelector('form');
if (form) {
  form.addEventListener('submit', async (e) => {
    e.preventDefault();
    const contacto: IContacto = {
      cedula: numberIdInput.value,
      nombre: nombreInput.value,
      apellido: apellidoInput.value,
      correo: correoInput.value,
      profesion: profesionInput.value,
    };
    const result = await contactoModel.editarContacto(id ?? '', contacto);
    console.log(result);
    if (result !== undefined && result !== null) {
      alert('Contacto actualizado correctamente');
     window.location.href = '/mostrarContactos';
    } else {
      alert('Error al actualizar el contacto');
    }
  });
}
</script>




<form class="max-w-lg mx-auto mt-8 p-6 shadow-md rounded-lg">
  <div class="text-center">
    <h3 class="text-lg font-semibold leading-6 text-gray-900">
      Editar Contacto
    </h3>
    <p class="mt-1 text-sm leading-5 text-gray-500">
      Actualice la información del contacto
    </p>
  </div>
  <div class="border-b border-gray-900/10 pb-12">
    <div class="mt-10 grid grid-cols-1 gap-x-6 gap-y-8 sm:grid-cols-6">
      <div class="sm:col-span-3">
        <label
          for="number-id"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Número Cedula</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="number-id"
            id="number-id"
            readonly
            class="block w-full rounded-md border-0 py-1.5 pl-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-40 sm:text-sm sm:leading-6"
          />
        </div>
      </div>
      <div class="sm:col-span-3">
        <label
          for="nombre"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Nombres</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="nombre"
            id="nombre"
            class="block w-full rounded-md border-0 py-1.5 pl-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:leading-6"
          />
        </div>
      </div>
      <div class="sm:col-span-3">
        <label
          for="apellido"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Apellidos</label
        >
        <div class="mt-2">
          <input
            type="text"
            name="apellido"
            id="apellido"
            class="block w-full rounded-md border-0 py-1.5 pl-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6"
          />
        </div>
      </div>
      <div class="sm:col-span-3">
        <label
          for="correo"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Correo</label
        >
        <div class="mt-2">
          <input
            id="correo"
            name="correo"
            type="email"
            class="block w-full rounded-md border-0 py-1.5 pl-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-40 sm:text-sm sm:leading-6"
          />
        </div>
      </div>
      <div class="sm:col-span-3">
        <label
          for="profesion"
          class="block text-sm font-medium leading-6 text-gray-900"
          >Profesión</label
        >
        <div class="mt-2">
          <input
            id="profesion"
            name="profesion"
            type="text"
            class="block w-full rounded-md border-0 py-1.5 pl-2 text-gray-900 shadow-sm ring-1 ring-inset ring-gray-300 placeholder:text-gray-400 sm:text-sm sm:leading-6"
          />
        </div>
      </div>
    </div>
  </div>

  <div class="mt-6 flex items-center justify-end gap-x-6">
    <button type="button" class="text-sm font-semibold leading-6 text-gray-900"
      >Cancelar</button
    >
    <button
      type="submit"
      class="rounded-md bg-indigo-600 px-3 py-2 text-sm font-semibold text-white shadow-sm hover:bg-indigo-500 focus-visible:outline focus-visible:outline-2 focus-visible:outline-offset-2 focus-visible:outline-indigo-600"
      >Guardar</button
    >
  </div>
</form>
